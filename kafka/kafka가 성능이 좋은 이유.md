
### 파티션 파일은 OS 페이지캐시 사용
- 파티션에 대한 파일 IO를 메모리에서 처리하기 때문에 빠르다.
- 서버에서 페이지캐시를 카프카만 사용해야 성능에 유리하다

### Zero Copy
- 디스크 버퍼에서 네트워크 버퍼로 직접 데이터 복사.

### 컨슈머 추적을 위해 브로커가 하는 일이 비교적 단순하다.
- 메세지 필터, 메세지 재전송과 같은 일은 브로커가 하지 않는다.
	- 프로듀서, 컨슈머가 직접 해야한다 (근데 그러면... 결국 이 일은 프로듀서 or 컨슈머가 해야 하니 성능 향상이라고 보는게 맞나? 브로커의 역할만 줄어든 것이 아닌가?).
- 브로커는 컨슈머와 파티션 간 매핑 관리 

### 묶어서 보내기, 묶어서 받기(batch)
- 프로듀서: 일정 크기만큼 메세지를 모아서 전송 가능
- 컨슈머: 최소 크기만큼 메세지를 모아서 조회 가능

### 처리량 증대(확장)가 쉬움
- 1개 장비의 용량 한계 -> 브로커 추가, 파티션 추가
- 컨슈머가 느림 -> 컨슈머 추가(+파티션 추가)


### 리플리카 - 복제
![스크린샷 2023-01-10 오후 9.31.47.png](images%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-10%20%EC%98%A4%ED%9B%84%209.31.47.png)
- 리플리카: 파티션의 복제봄
	- 복제수만큼 파티션의 복제본이 각 브로커에 생긴다.
- 리더와 팔로워로 구성
	- 프로듀서와 컨슈머는 리더를 통해서만 메세지를 처리
	- 팔로워는 리더로부터 복제
- 장애 대응
	- 리더가 속한 브로커 장애시 다른 팔로워가 리더가 됨

### 궁금증
- 리플리카 관련해서
	- 리더 파티션과 팔로워 파티션의 역할이 나눠지면서 팔로워가 리더 파티션의 데이터를 복제하는 것은 알겠다.
	- 그럼 이 파티션들은 하나의 카프카 서버 안에 다 들어있는건가? 그럼 서버 뻗으면 어떻게 해? (답: 당연히 하나의 서버 안에 다 들어있지않다.)
    
