
### Topic
각종 데이터를 담는 큐라고 보면 된다.
![스크린샷 2023-01-09 오후 3.43.53.png](images%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-09%20%EC%98%A4%ED%9B%84%203.43.53.png)
데이터를 넣는 역할은 Producer가 하고, 큐에서 데이터를 가져가는 역할은 Consumer가 하게 된다.
Producer랑 Consumer는 라이브러리로 되어 있어서, 어플리케이션에서 구현이 가능하다.
이와 같이 카프카는 아주 유용한 큐 역할을 한다고 보면 된다.

**토픽은 일종의 폴더나 메일함 같이 메세지를 목적에 따라 구분하는 단위이다.
토픽은 실제로는 한개 이상의 파티션으로 구성이 된다. 여기서 파티션은 메세지를 저장하는 물리적인 파일이다.**

토픽은 이름을 가질 수 있는데, 목적에 따라 클릭로그, send sms, location log등과 같이 무슨 데이터를 담는지 명확하게 명시하면 추후 유지보수 시 편리하게 관리할 수 있다.

![스크린샷 2023-01-09 오후 3.45.24.png](images%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-09%20%EC%98%A4%ED%9B%84%203.45.24.png)
하나의 토픽은 여러 개의 파티션으로 구성될 수 있으며, 첫 번째 파티션 번호는 0번부터 시작하여 차곡차곡 쌓인다.

컨슈머가 토픽 내부의 파티션에서 데이터를 가져가더라도 데이터는 삭제되지 않는다. 파티션에 그대로 남게 된다.
그리고 파티션에 남은 데이터는 새로운 Consumer가 붙었을 때, 다시 0번부터 가져가서 사용할 수 있다.
다만 Consumer그룹이 달라야 하고, auto.offset.reset=earliest여야 한다.

이처럼 사용할 경우, 동일 데이터에 대해서 두번 처리할 수 있는데, 이는 카프카를 사용하는 중요한 이유이기도 하다.

파티션 갯수는 늘릴 수는 있지만, 줄일 수는 없다.
파티션의 개수를 늘리는 것은 데이터 처리를 분산시키기 위해서이다.

이러한 카프카는 고아용성으로서 서버가 이슈가 생기거나, 갑작스럽게 전원이 꺼지는 상황에서도 데이터를 손실 없이 복구할 수 있다.

그리고 낮은 레이턴시와 높은 처리량을 통해 효과적으로 데이터를 처리할 수 있다.
![스크린샷 2023-01-10 오후 8.52.45.png](images%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-10%20%EC%98%A4%ED%9B%84%208.52.45.png)

![스크린샷 2023-01-10 오후 9.53.28.png](images%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-01-10%20%EC%98%A4%ED%9B%84%209.53.28.png)
한 개의 파티션은 컨슈머 그룹의 한 개의 컨슈머만 연결이 가능하다.
그룹에 속해 있는 컨슈머들이 특정한 파티션을 공유할 수 없다.
그렇기 때문에 한 컨슈머그룹을 기준으로 파티션의 메세지는 순서대로 처리될 수 밖에 없다.
